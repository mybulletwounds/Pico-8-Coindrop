pico-8 cartridge // http://www.pico-8.com
version 32
__lua__
basket_sprite = 1
player_sprite = 2

player_x = 64
player_y = 100

coins ={}
coin_start = 16
coin_count = 6
coin_change = 16

gravity = 1
level = 1
points = 0

function _init()
    for i =1, level do
        coins={
            sprite = flr(rnd(coin_count)+coin_start),
            x=flr(rnd(120)+5),
            y=i*(-coin_change)
        }
        add(coins, coin)
    end
end

function _update()
    if btn(0) then
        player_x -= 2
    end

    if btn(1) then
        player_x +=2
    end

    for coin in all(coins)do
        coin.y += gravity

        if coin.y+4 >= player_y-8
        and coin.y + 4<= player_y
        and coin.x + 4>= player_x
        and coin.x + 4 <= player_x + 8 then
            points += 1
            del(coins,coin)
        end
        if coin.y >100 then
            del(coins, coin)
        end
    end
    if #coins==0 then
        level+= 1
        _init()
    end
end

function _draw()
    cls()
    rectfill(0,108,127, 127,3)
    spr(player_sprite, player_x, player_y)
    spr(basket_sprite,player_x,player_y-8)

    for coin in all(coins)do
        spr(coin.sprite,coin.x, coin.y)
    end

    print("score = "..points)

end

__gfx__
0000000000000000f003b00f00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000030333b0b00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000003009900b00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0007700005555560300ff00b00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000055555603333333b00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700055556600003b00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000005556000003b00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000050050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00aaaa00000aa000000a000000090000009990000009000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0aaaaaa000aaaa00000a000000999000099a99000009000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0aaaaaa000aaaa00000a0000009990000999a900000a000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0aaaaaa000aaaa00000a0000009990000999a900000a000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00aaaa00000aa000000a000000090000099aa9000009000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000009990000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
